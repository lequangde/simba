<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	th:replace="~{/layout/admin_template::areas(~{::title}, ~{::link}, ~{::#content_title}, ~{::main},~{::script})}">

<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" th:href="@{/css/excel/excel.css}">
<link rel="stylesheet"
	href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
<!-- Include DataTables CSS -->
<link rel="stylesheet" type="text/css"
	href="https://cdn.datatables.net/1.11.6/css/jquery.dataTables.css">
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
</head>

<body>

	<main>
		<h1 class="mb-5">Kết quả đánh giá CHB</h1>

		<!--  -->
		<div class="col-lg-10">
			<form id="countryForm" class="mb-4" th:action="@{/excel/report}"
				method="post" onsubmit="submitForm(event, 'view')">
				<div class="">
					<div class="navbar-selection mt-3 mb-4 d-flex">
						<div class="wrapperr" id="wrapper">
							<div class="select-btn">
								<span>Chọn cơ sở...</span> <i class="uil uil-angle-down"></i>
							</div>
							<div class="content">
								<div class="search">
									<i class="uil uil-search"></i> <input spellcheck="false"
										type="text" placeholder="Tìm kiếm..">
								</div>
								<ul class="options">

								</ul>
							</div>
						</div>
						<i class="fa-solid fa-retweet reset" onClick="refreshPage()"></i>
						<select id="dateSelector" class="form-select ml-5">
							<option disabled selected value="">Tùy chọn</option>
							<option id="currentDate" value="currentDate">Ngày hôm
								nay</option>
							<option value="currentWeek">Tuần này</option>
							<option id="currentMonth" value="currentMonth">Tháng này</option>
						</select>
					</div>
					<input type="hidden" name="selectedCountry"
						id="selectedCountryInput">
					<div>
						<div class="d-flex justify-content-between w-60">
							<label class="fw-bold fs-5">Từ ngày</label> <label
								class="fw-bold fs-5">Tới ngày</label>
						</div>
						<div class="d-flex justify-content-between w-60">
							<input id="startDate" type="date" class="form-control date"
								name="startDate" required> <input id="endDate"
								type="date" class="form-control date" name="endDate" required>
						</div>
					</div>
				</div>
				<button class="btn btn-primary mt-5 mr-4" type="submit">Xem
					báo cáo</button>
				<button class="btn btn-primary mt-5" type="submit"
					onclick="submitForm(event, 'download')">Tải xuống</button>
			</form>
			<select class="form-select mb-3" id="ratingFilter" onchange="filterTableByRating()">
				<option value="all">Lọc tất cả sao</option>
				<option value="1">1 sao</option>
				<option value="2">2 sao</option>
				<option value="3">3 sao</option>
				<option value="4">4 sao</option>
				<option value="5">5 sao</option>
			</select>
			<table id="ratingTableBody" class="table table-bordered">
				<thead>
					<tr>
						<th>Mã đánh giá</th>
						<th>Cơ sở</th>
						<th>Đánh giá món ăn</th>
						<th>Đánh giá phục vụ</th>
						<th>Thời gian</th>
					</tr>
				</thead>

				<tbody>
					<tr th:each="d, status : ${listRating}"
						th:data-rate-id="${d.rateId}" th:data-department="${d.department}"
						th:data-value-food="${d.valueFood}"
						th:data-value-service="${d.valueService}"
						th:data-date-rate="${d.dateRate}">
						<td class="fw-bold fs-4" th:text="${d.rateId}"></td>
						<td class="fw-bold fs-4" th:text="${d.department}"></td>
						<td><span th:each="i : ${#numbers.sequence(1, 5)}"> <i
								class="fa-solid fa-star" style="color: #FFD43B;"
								th:if="${i <= d.valueFood}"></i>
						</span></td>
						<td><span th:each="i : ${#numbers.sequence(1, 5)}"> <i
								class="fa-solid fa-star" style="color: #FFD43B;"
								th:if="${i <= d.valueService}"></i>
						</span></td>
						
						<td class="fw-bold fs-4" th:text="${d.dateRate}"></td>
						
					</tr>
				</tbody>
			</table>
			<div th:if="${#lists.isEmpty(listRating)}">No data found!</div>
			<div id="noDataMessage" class="fs-4 fw-bold" style="display: none;">No data found!</div>
			<div id="pagination" th:if="${not #lists.isEmpty(listRating)}">
				<button id="previousPage" class="btn" onclick="previousPage()"><</button>
				<span id="pageNumbers"></span>
				<button id="nextPage" class="btn" onclick="nextPage()">></button>
			</div>
		</div>

		<script th:src="@{/js/excel/excel.js}"></script>
	</main>

</body>

</html>